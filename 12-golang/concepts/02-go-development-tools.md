## GO Development Tools

In the Go language, many of our operations are performed through `go` commands. For example, if we want to compile a go file, we need to use `go build` commands. In addition `build` command, there are many commonly used commands.

### Go development tools overview

This `go` tool, despite its short name, is actually very powerful development tool. Let's open the terminal and see what capabilities this tool has.

```md
➜ ~ go
Go is a tool for managing Go source code.

Usage:

    go command [arguments]

The commands are:

    build       compile packages and dependencies
    clean       remove object files
    doc         show documentation for package or symbol
    env         print Go environment information
    bug         start a bug report
    fix         run go tool fix on packages
    fmt         run gofmt on package sources
    generate    generate Go files by processing source
    get         download and install packages and dependencies
    install     compile and install packages and dependencies
    list        list packages
    run         compile and run Go program
    test        test packages
    tool        run specified go tool
    version     print Go version
    vet         run go tool vet on packages

Use "go help [command]" for more information about a command.

Additional help topics:

    c           calling between Go and C
    buildmode   description of build modes
    filetype    file types
    gopath      GOPATH environment variable
    environment environment variables
    importpath  import path syntax
    packages    description of package lists
    testflag    description of testing flags
    testfunc    description of testing functions

Use "go help [topic]" for more information about that topic.
```

### go build

`go build`, is a very commonly used command. It can start the compilation and compile our package and related dependencies into an executable file.

```md
usage: go build [-o output] [-i] [build flags] [packages]
```

```sh
go build . # build all source files in current directory

go build hello.go # build hello.go file in current directory

go build flysnow.org/tools/... # Three dots mean matching all strings, means compile all packages in tools directory

GOOS=linux GOARCH=amd64 go build flysnow.org/hello # build for linux os and amd64 architecture
```

By default, executable files are generated based on our current machine. A total of 9 processor architectures are supported.

### go clean

When we use `go build` compilation, compiled files will be generated. The `go clean`command clean up the files generated by our compilation, such as the generated executable files, generated obj objects, etc. This can be useful when creating ci/cd pipeline to ensure generated code is wiped clean.

```md
usage: go clean [-i] [-r] [-n] [-x] [build flags] [packages]
```

### go run

`go build` command first compile, then we execute the executable file to run our program, which requires two steps. `go run` command can combine these two steps into one command, saving our input time. Through `go run` command, we can directly see the output result.

```md
usage: go run [build flags] [-exec xprog] gofiles... [arguments...]
```

The `go run` command requires a go file as a parameter. This go file must contain the main package and the main function in order to run. The other parameters are similar to `go build`.

### go env

Use `go env` to view our go environment information, which is convenient for us to debug and troubleshoot.

```md
➜ hello go help env
usage: go env [var ...]

Env prints Go environment information.

By default env prints information as a shell script
(on Windows, a batch file). If one or more variable
names is given as arguments, env prints the value of
each named variable on its own line.
```

### go install

It is similar to `go build`, but it can install the generated executable files or libraries to the corresponding directory after compilation for use.

```md
➜ hello go help install
usage: go install [build flags] [packages]

Install compiles and installs the packages named by the import paths,
along with their dependencies.
```

If you do not specify a package name, the current directory is used. . If an executable file is generated, it is installed in `$GOPATH/bin` the directory; if it is a referenceable library, it is installed in `$GOPATH/pkg` the directory.

### go get

`go get` command can download and update the specified package and dependent packages from the Internet, compile and install them. This package dependency is added to `go.mod` file and a checksum is maintained in `go.sum` file.

```sh
go get github.com/spf13/cobra
```

If we need to update a go project on the network, just add the `-u` flag.

```sh
go get -u github.com/spf13/cobra
```

Similarly, by enabling `-v` the flag, you can see the progress of the download and more debugging information.

### go fmt

`go fmt` can format the layout of our source code to be the same style as Go source code, that is, to unify the code style. In this way, we no longer have to argue about whether to put the curly braces at the end of the line or on a new line, and whether to use spaces or tabs for indentation. Everything is unified for us.

```sh
➜ hello gofmt -h
usage: gofmt [flags] [path ...]
    -cpuprofile string
    # write cpu profile to this file
    -d display diffs instead of rewriting files
    -e report all errors (not just the first 10 on different lines)
    -l list files whose formatting differs from gofmt
    -r string
    # rewrite rule (e.g., 'a[b:len(a)] -> a[b:]')
    -s simplify code
    -w write result to source file instead of stdout
```

For more opinionated formatting use external libraries like `golangci-lint`.

### go test

This command is used for Go unit testing. It also accepts a package name as a parameter. If not specified, the current directory is used.
The `go test` unit tests run must meet the test requirements of Go.

1. The file name containing the unit tests must end with `_test.go`.
2. The test file should contain at least one test function.
3. These test functions must be prefixed with Test and accept a `testing.T` type parameter.

```go
package main

import "testing"

func TestAdd(t *testing.T) {
	if Add(1,2) == 3 {
		t.Log("1+2=3")
	}

	if Add(1,1) == 3 {
		t.Error("1+1=3")
	}
}
```

```sh
➜ hello go test
PASS
ok      flysnow.org/hello 0.006s
```

The above mainly introduces the commonly used commands of the development tool go. After being familiar with them, it can help us develop coding better
